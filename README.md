# SKALDEngine Backend Part

Платформа для интерактивного сторителлинга и ролевой игры с ИИ-персонажами, использующая RAG (Retrieval Augmented Generation), долгосрочную память и архитектуру Supervisor-Worker для управления сюжетом.

## Особенности
-- Иммерсивный ролеплей: Глубокое погружение благодаря продвинутым системным промптам и стилизации ответов.
-- Два режима ролевой игры: 
    -- Режим Песочницы, неограниченный рамками;
    -- Режим Сценария, где игра идет по заданному сюжету от точки А в точку Б.
-- Персонажи помнят факты из своей биографии и мира благодаря векторному поиску.
-- Отдельная нейросеть-арбитр следит за логикой сюжета и подталкивает игрока, если история буксует.
-- Возможность перегенерировать ответ ИИ, создавая альтернативные ветки развития событий.
-- Создание и сохранение разных "Персон" для разных историй.

## Технический стек

-- Язык: Python 3.11+
-- Фреймворк: FastAPI
-- База данных:
    -- SQLite (Dev) / PostgreSQL (Prod) — хранение пользователей, сессий, истории чатов.
    -- SQLAlchemy (Async) — ORM.
    -- Alembic — миграции базы данных.
-- AI & ML:
    -- LLM: Google Gemini 3.0 Flash (основная модель), Gemini 2.5 Flash (Supervisior).
    -- Vector DB: ChromaDB (хранение эмбеддингов для RAG).

## Быстрый старт

1. Клонирование и установка завивисмостей проекта:
```
cd backend
python -m venv venv
source venv/bin/activate  # (Windows: venv\Scripts\activate)
pip install -r requirements.txt
```

2. Настройка окружения в файле `.env`:
```
PROJECT_NAME="AI Roleplay Platform"
DATABASE_URL="sqlite+aiosqlite:///./diploma.db"
SECRET_KEY="your-super-secret-key"
GEMINI_API_KEY="your-google-api-key"
```

3. Применение миграций и создание БД:
```
alembic upgrade head
```

4. Запуск сервера:
```
uvicorn app.main:app --reload
```

5. Документация API будет доступка по адресу `http://127.0.0.1:8000/docs` для просмотра Swagger UI.